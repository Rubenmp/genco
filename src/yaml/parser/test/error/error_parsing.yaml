logging:
  level:
    root: INFO
amiga:
  common:
    config:
      enabled: true
    cache:
      redis:
        enabled: true
        cluster:
          enabled: true
        transaction-aware: true
        default-cache-conf:
          use-key-prefix: true
          time-to-live: 30m
        cache-names:
          - auditors
          - questionnaire-versions
          - standard-versions
          - livelink
          - contact-mappings
          - sustproc-productive-processes
        per-cache-conf:
          contact-mappings:
            time-to-live: 0s

    rest:
      client:
        sustques:
          auth-method: OAUTH2-CLIENT-CREDENTIALS
          client-name: evaluation-client-oauth
        evalques:
          auth-method: OAUTH2-CLIENT-CREDENTIALS
          client-name: evaluation-client-oauth
        evalstds:
          auth-method: OAUTH2-CLIENT-CREDENTIALS
          client-name: evaluation-client-oauth
        analytics:
          auth-method: OAUTH2-CLIENT-CREDENTIALS
          client-name: analytics-client-oauth
        datagravity-sostnd:
          auth-method: OAUTH2-CLIENT-CREDENTIALS
          client-name: datagravity-sostnd-client-oauth
        sustaudit:
          auth-method: OAUTH2-CLIENT-CREDENTIALS
          client-name: evaluation-client-oauth
        sustproc:
          auth-method: OAUTH2-CLIENT-CREDENTIALS
          client-name: evaluation-client-oauth
        slcpintegrat:
          auth-method: OAUTH2-CLIENT-CREDENTIALS
          client-name: evaluation-client-oauth
    oauth2-client:
      enabled: true
      clients:
        analytics-client-oauth:
          uri-token: https://login.microsoftonline.com/c8e8bdb6-8e7c-41d5-bc41-37fff3c33b75/oauth2/token
        datagravity-sostnd-client-oauth:
          resource: d118c364-87c8-40d2-ba41-105287697c36
          uri-token: https://login.microsoftonline.com/c8e8bdb6-8e7c-41d5-bc41-37fff3c33b75/oauth2/token
    dynamic-scheduling:
      enabled: true
      jitter: 500
      tasks:
        syncCompaniesAndLocationsTask:
          enabled: true
          cron: "0 0 */6 ? * *"
        slcpAssessmentsImportTask:
          enabled: true
          cron: "0 0 0,8 ? * *"
        syncSlcpValidatorInfoTask:
          enabled: true
          cron: "0 0 */6 ? * *"
        exportValidatedAuditsTask:
          enabled: true
          cron: "0 0 */5 ? * *"
        slcpFacilitiesImportTask:
          enabled: true
          cron: "0 0 */5 ? * *"
  service:
    aaa:
      web:
        cors:
          enabled: true
      paths:
        app-public-path: /swagger-ui**,/itx-openapi.js,/vendor/**,/jobs/trigger, /**/publish
      classic:
        sso:
          urlBaseSSO: http://axdeswas17.central.inditex.grp/ServiciosSSO
    graphql:
      servlet:
        cors-enabled: true
  data:
    jdbc:
      pool:
        hikari:
          connection-timeout: 5000
          validation-timeout: 2000
          minimum-idle: 10
          connection-init-sql: SELECT 1
          keepalive-time: 80000
          maximum-pool-size: 10
    jpa:
      show-sql: false
      properties:
        hibernate:
          dialect: org.hibernate.dialect.MariaDB103Dialect
          physical_naming_strategy: org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy
          hbm2ddl.auto: none
          format_sql: false
          jdbc.time_zone: CET
    stream:
      bindings:
        slcp-audit-output:
          content-type: application/*+avro
          registered-schema: classpath:/v2/message_slcp_audit_envelope.avsc
          header-injection:
            headers:
              itx_envelope_id: pipe-event:1.0
        slcp-location-output:
          content-type: application/*+avro
          registered-schema: classpath:/v4/message_slcp_location_envelope.avsc
          header-injection:
            headers:
              itx_envelope_id: pipe-event:1.0
      schema:
        avro:
          schema-imports:
            - classpath*:/pipe/v1/imports/pipe_definitions.avsc
            - classpath*:/slcp/v2/imports/entity_slcp_audit.avsc
            - classpath*:/slcp/v2/imports/entity_slcp_audit_create.avsc
            - classpath*:/slcplocation/v4/imports/entity_slcp_location_match.avsc
            - classpath*:/slcplocation/v4/imports/entity_slcp_location_match_create.avsc
            - classpath*:/slcplocation/v4/imports/entity_slcp_location_match_update.avsc
          schema-sources:
            - classpath*:/event/**/*.avsc
            - classpath*:/slcp/v2/*.avsc
            - classpath*:/slcplocation/v4/*.avsc
        developer-mode: false
graphql:
  dataloader:
    max-batch-size: 50
    executor-pool-size: 10
  servlet:
    maxQueryDepth: 5

spring:
  config:
    import: amiga-config:${amiga-config.channel-type.configmap-k8s.mount-path}/${amiga-config.channel-type.configmap-k8s.file-name}
  servlet:
    multipart:
      max-file-size: 5MB
      max-request-size: 5MB
  batch:
    job:
      enabled: false #disable automatic jobs launch on application startup
app: #todo: remove and use constants in client code
  conf:
    serviceuser:
      user: test
      password: test
    azure:
      auth-type: client-secret
      tenant-id: c8e8bdb6-8e7c-41d5-bc41-37fff3c33b75
      container-url: https://dvsstnbltystaweu1dev001.blob.core.windows.net/evalconc
      storage-root-folder: audits
  paths:
    definitions:
      slcp:
        audit: /definitions/SlcpAuditDefinition.yml
        settings: /definitions/slcp/Settings.yml
      environmental: /definitions/EnvironmentalAuditDefinition.yml
      social: /definitions/SocialAuditFlowDefinition.yml
    audit-roles: /AuditRoles.yml
    non-compliance-rules: /NonComplianceRules.yml
    sso-platform-definition: /SsoPlatformDefinition.yml
    cancel-reason: /CancelReasons.yml
